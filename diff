diff --git a/build/templates-nordstar-test.js b/build/templates-nordstar-test.js
index c2e7869..0840555 100644
--- a/build/templates-nordstar-test.js
+++ b/build/templates-nordstar-test.js
@@ -1,2 +1,2 @@
-!function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/es-meal/es-meal.html",'<div class="item__i mobileHide"><div class="top"><div class="top__i"><table><tbody><tr><td><div class="text"><div class="iconBox" ng-click="vm.switchService()"><i class="icon_meal"></i></div><div class="name"><h2>{{ \'web.extraServices.meal.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.meal"><span class="infoBoxWrap"><i class="icon_info"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.serviceDesc\' | aliasStatic}}</span></span></span></a></h2><p>{{ \'web.extraServices.meal.desc\' | aliasStatic}}</p></div></div></td><td><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3></div></div></td><td><a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.meal.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.meal.deselect\' | aliasStatic}}</span></a></td></tr></tbody></table></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="foodSelect"><div class="foodSelect__i"><div class="passengersBlock"><div class="passengersBlock_row"><div class="passengersBlock_row-control"><div class="passengersBlock_row-control-outer" ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights"><div class="passengersBlock_row-control-passengers" ng-click="vm.selectFlightPassenger(flightNum, 0)" ng-class="{active:flightNum == vm.selectedFlight}"><i class="passengersBlock_row-control-passengers-icon" aria-hidden="true"></i> <span class="passengersBlock_row-control-passengers-racenumber">{{flight.racenumber}}</span><geo-marker prefix="dep__point" key="es-meal" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker><i class="passengersBlock_row-control-passengers-delimiter" aria-hidden="true"></i><geo-marker prefix="arr__point" key="es-meal" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div><div class="passengersBlock_row-control-droporder" ng-show="flightNum == vm.selectedFlight"><div class="passengersBlock_row-control-droporder-passenger" ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]"><div class="passengersBlock_row-control-droporder-passenger-outer" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" ng-class="{active: passengerNum == vm.selectedPassenger}"><i class="passengersBlock_row-control-droporder-passenger-icon" aria-hidden="true"></i> <span class="passengersBlock_row-control-droporder-passenger-name">{{ passenger.lastName }} {{ passenger.firstName }}</span></div><div ng-if="vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum]" class="passengersBlock_row-control-droporder-passenger-order" ng-repeat="(indexMealSelect, itemMealSelect) in vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum] track by $index"><div class="passengersBlock_row-control-droporder-passenger-order-outer"><span>{{itemMealSelect.title}}</span> <span ng-bind-html="{ value: itemMealSelect.totalPrice, currency: itemMealSelect.currency } | price"></span> <i class="passengersBlock_row-control-droporder-passenger-order-remove" ng-click="vm.selectFlightPassenger(flightNum, passengerNum); vm.removePassengerFlightMeal(passengerNum, flightNum)" aria-hidden="true"></i></div></div></div></div></div></div><div class="passengersBlock_row-menu"><div ng-if="!vm.mealMenu" class="passengersBlock_row-menu__no-food">{{ \'web.extraServices.meal.noFood\' | aliasStatic}}</div><div ng-if="vm.service.subgroups.length > 1 && vm.mealMenu" class="passengersBlock_row-menu-foodSorting"><ul><li ng-class="{ active: vm.mealMenuSubgroup === false }"><a href="" ng-click="vm.mealMenuSubgroup = false">{{ \'web.meal.subgroup.\' | aliasWithPrefix:\'all\' }}</a></li><li ng-repeat="(subgroupNum, subgroupCode) in vm.service.subgroups" ng-class="{ active: vm.mealMenuSubgroup === subgroupNum }"><a href="" ng-click="vm.mealMenuSubgroup = subgroupNum">{{ \'web.meal.subgroup.\' | aliasWithPrefix:subgroupCode }}</a></li></ul></div><div class="list customScroll_height customScroll_js" custom-scroll=""><div class="list__i isotopeGrid"><wrap ng-repeat="(subgroupNum, subgroup) in vm.mealMenu"><div ng-repeat="mealItem in subgroup" ng-if="vm.mealMenuSubgroup === subgroupNum || vm.mealMenuSubgroup === false" ng-class="{ active: mealItem.active, control_disabled: vm.locked }" class="item"><div class="food_wrap"><div class="img"><span class="item__status-count" ng-if="mealItem.alreadySelectedCount">{{ mealItem.alreadySelectedCount }}</span> <img ng-src="{{vm.mealImagesPath}}/{{ mealItem.serviceType }}-{{ mealItem.rfisc }}.jpg" alt=""></div><div class="food_info"><div class="name"><p>{{ mealItem.title }}</p><p class="price" ng-bind-html="{ value: mealItem.price, currency: mealItem.currency } | price"></p></div><div class="description"><a ng-if="vm.hasAlias(\'web.extraServices.meal.ingredientsDescriptionContent.\' + mealItem.serviceType + \'.\' + mealItem.rfisc)" href="" fancybox="popupAlias" class="link link--ingredientsDescription" data-popup-alias="web.extraServices.meal.ingredientsDescriptionContent.{{mealItem.serviceType}}.{{mealItem.rfisc}}">{{ \'web.extraServices.meal.ingredientsDescriptionLabel\' | aliasStatic }}</a><p ng-bind-html="mealItem.description"></p></div><button class="item__btn" ng-click="vm.mealCountChangeHandler(subgroupNum, mealItem, +1)" ng-if="mealItem.alreadySelectedCount < 1">{{ \'web.extraServices.meal.choose\' | aliasStatic}}</button> <button class="item__btn" ng-click="vm.mealCountChangeHandler(subgroupNum, mealItem, +1)" ng-if="mealItem.alreadySelectedCount > 0 && mealItem.alreadySelectedCount !== mealItem.limit">{{ \'web.extraServices.meal.addAnother\' | aliasStatic}}</button> <button class="item__btn" ng-class="{selected: mealItem.alreadySelectedCount == mealItem.limit}" ng-if="mealItem.alreadySelectedCount == mealItem.limit">{{ \'web.extraServices.meal.selected\' | aliasStatic}}</button></div></div></div></wrap></div></div></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.meal.cancel\' | aliasStatic }}</a></div></div></div></div></div></div></div><div class="item__i mobileShow"><div class="top"><div class="top__i"><a href=""><div class="row"><table><tbody><tr><td><i class="icon_meal"></i></td><td><div class="name">{{ \'web.extraServices.meal.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.meal"><i class="icon_info"></i></a></div></td></tr></tbody></table></div></a><div class="row"><a href=""><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3></div></div></a> <a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.meal.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.meal.deselect\' | aliasStatic}}</span></a></div></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="foodSelect drop_mobile"><div class="foodSelect__i"><div class="passengersContainer"><div class="passengersTableContainer" ng-class="{ one_passenger: (vm.getAvailablePassengersCount(vm.service.availableByPassengerSegments) == 1) }"><a href="" ng-click="vm.scrollToEnd();" class="passengersTableContainer__control passengersTableContainer__control_next" ng-class="{ control_disabled: !vm.canScrollRight }"></a><table class="passengersTable passengersTableMobile"><tbody><tr class="headRow"><td class="firstCol"><a href="" ng-click="vm.scrollToStart();" class="passengersTable__control passengersTable__control_prev" ng-class="{ control_disabled: !vm.canScrollLeft }"></a></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]">{{ passenger.lastName }} {{ passenger.firstName }}</td></tr><tr ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-if="vm.service.availableBySegments[flightNum]" class="contentRow"><td class="firstCol"><div class="date">{{ flight.date | formatDate: \'D MMMM, dd\'}}</div><div class="route"><div class="route__dep"><span class="route__dep__city">{{ flight.originport }}</span></div><div class="route__plane"><i class="icon_plane"></i></div><div class="route__arr"><span class="route__arr__city">{{ flight.destinationport }}</span></div></div></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]" ng-class="{ active: vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum }" ng-init="selectedPassengerFlightMeals = vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum]"><div ng-if="!selectedPassengerFlightMeals"><a href="" fancybox="popupMeal" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_select: (!selectedPassengerFlightMeals && vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum) }"><wrap ng-if="vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum">{{ \'web.extraServices.meal.selectItem\' | aliasStatic}}</wrap><wrap ng-if="!(vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.meal.noneSelected\' | aliasStatic}}</wrap></a></div><div ng-if="selectedPassengerFlightMeals" ng-repeat="(indexMealSelect, itemMealSelect) in selectedPassengerFlightMeals track by $index"><a href="" fancybox="popupMeal" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_empty: !selectedPassengerFlightMeals }"><wrap ng-if="selectedPassengerFlightMeals">{{ itemMealSelect.title }}</wrap></a> <span ng-if="selectedPassengerFlightMeals" class="passengersTable__priceSeat" ng-bind-html="{ value: itemMealSelect.totalPrice, currency: itemMealSelect.currency } | price"></span> <a ng-if="selectedPassengerFlightMeals" href="" ng-click="vm.removePassengerFlightMeal(passengerNum, flightNum)" class="btn-remove"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.meal.cancelByPassengerSegment\' | aliasStatic }}</span></span></span></a></div></td></tr></tbody></table></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.meal.cancel\' | aliasStatic}}</a></div></div></div></div></div><popup-meal menu="vm.mealMenu" passenger="vm.orderInfo.passengers[vm.selectedPassenger]" flight="vm.orderInfo.plainFlights[vm.selectedFlight]" handler="vm.mealCountChangeHandler" path="vm.mealImagesPath" subgroups="vm.service.subgroups"></popup-meal></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/passengers/passengers.html",'<app-loader ng-if="vm.loading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="searchSteps"><div class="wrap"><div class="searchSteps__i"><ol><li class="prev"><a href="{{ \'site.mainPageUrl\' | param }}">{{ \'web.steps.search\' | aliasStatic}}</a></li><li class="prev"><a href="#{{$root.ROUTES.SEARCH}}">{{ \'web.steps.selectVariant\' | aliasStatic}}</a></li><li class="active">{{ (vm.passengers.length == 1) ? ( \'web.steps.passenger\' | aliasStatic) : ( \'web.steps.passengers\' | aliasStatic) }}</li><li>{{ \'web.steps.extraServices\' | aliasStatic}}</li><li>{{ \'web.steps.payment\' | aliasStatic}}</li><li>{{ \'web.steps.order\' | aliasStatic}}</li></ol></div></div></div><div ng-if="vm.orderInfo && vm.passengersCheck" class="searchParams searchParams_passengers"><div class="wrap"><div class="searchParams__i"><div class="info"><ul><li><geo-marker prefix="dep__point" key="passengers" city="vm.orderInfo.flights[0].flights[0].origincity" cityname="vm.orderInfo.flights[0].flights[0].origincityName" port="vm.orderInfo.flights[0].flights[0].originport" portname="vm.orderInfo.flights[0].flights[0].originportName"></geo-marker>–<geo-marker prefix="arr__point" key="passengers" city="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcity" cityname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcityName" port="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationport" portname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationportName"></geo-marker></li><li ng-show="vm.orderInfo.flights.length == 2">{{ \'web.searchForm.roundtrip\' | aliasStatic}}</li><li ng-show="vm.orderInfo.flights.length == 1">{{ \'web.searchForm.oneway\' | aliasStatic}}</li><li>{{ vm.getDescPassCountStr() }}</li></ul></div></div></div></div><div class="content"><div class="wrap wrap_pt32"><div class="content__i"><div class="passengersInfo"><div class="passengersInfo__i"><h2>{{ (vm.passengers.length == 1) ? ( \'web.passengerInfo.header\' | aliasStatic) : ( \'web.passengersInfo.header\' | aliasStatic) }}</h2><p ng-if="vm.passengersCheck.isLatinNamesOnly && !(\'site.foreignSite\' | param)" class="intAttention">{{ \'web.messages.passNamesLabel\' | aliasStatic}} <span ng-bind-html="\'web.messages.passNamesLatin\' | aliasStatic"></span></p><p class="login" ng-if="!vm.authoriseCustomer && !vm.accountExist">{{ \'web.passengersInfo.loginInvitationMessage\' | aliasStatic}} <a href="" fancybox="popupLogin">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><form class="passengerForm__js {{ vm.getOrderCountriesCssClasses() }}" ng-repeat="(passengerNumber, passenger) in vm.passengers" name="vm.passengerForms[{{passengerNumber}}]" form-submit-error-highlight="" novalidate=""><input type="hidden" name="categoryCode" ng-model="passenger.categoryCode"><div class="item"><div class="item__i"><div class="itemName"><div class="itemName__number"><span ng-show="vm.passengers.length > 1">{{ passengerNumber + 1 }}.</span> {{ \'web.passengerCategory.\' | aliasWithPrefix:passenger.categoryCode }}</div><div class="selectWrap itemName__ui-select" ng-if="vm.authoriseCustomer && vm.privatePassengers.length"><ui-select name="privatePassenger" search-enabled="false" ng-model="passenger.privatePassenger" theme="selectize" ui-select-custom="" ng-change="vm.setPrivatePassenger(passengerNumber)" class="ui-select-passengers-header"><ui-select-match placeholder="{{(vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName) || ( \'web.passengersInfo.privatePassengerSelect\' | aliasStatic)}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}">{{vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}</ui-select-match><ui-select-choices repeat="privatePassenger.num as (num, privatePassenger) in vm.privatePassengers"><div class="ui-select-passengers-data">{{ vm.currentLanguage !== \'ru\' && privatePassenger.value.firstNameEn ? privatePassenger.value.firstNameEn : privatePassenger.value.firstName }} {{ vm.currentLanguage !== \'ru\' && privatePassenger.value.lastNameEn ? privatePassenger.value.lastNameEn : privatePassenger.value.lastName }}</div><div class="ui-select-passengers-birth">{{ privatePassenger.value.dateOfBirth }}</div></ui-select-choices></ui-select></div></div><table class="passengerInfo"><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="passenger.lastName" ng-blur="vm.lastNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerLastNameLatRegexp : vm.passengersCheck.passengerLastNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="passenger.firstName" ng-blur="vm.firstNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerFirstNameLatRegexp : vm.passengersCheck.passengerFirstNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.firstName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].dateOfBirth" touched="vm.submitTouched"></error-message><input type="text" name="dateOfBirth" autocomplete="off" ng-model="passenger.dateOfBirth" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.rangeBirthByPassenger[passengerNumber].from }}" data-max-date="{{ vm.rangeBirthByPassenger[passengerNumber].to }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.dateOfBirth\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].gender" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.gender" theme="selectize" name="gender" search-enabled="false" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.privatePassengers.gender\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="gender.code as gender in vm.passangersAlias"><div ng-bind-html="gender.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.gender\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].nationality" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.nationality" theme="selectize" name="nationality" search-enabled="{{ !vm.isMobile }}" skip-focusser="true" ng-change="vm.nationalityChangeHandler(passengerNumber)" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected[vm.localNamePropName] || ( \'web.privatePassengers.nationality\' | aliasStatic) }}">{{$select.selected[vm.localNamePropName]}}</ui-select-match><ui-select-choices repeat="country.code as country in vm.countriesList | filter: {[vm.localNamePropName]: $select.search} track by country.code"><div ng-bind-html="country[vm.localNamePropName]"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.nationality\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].documentType" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.documentType" name="documentType" theme="selectize" search-enabled="false" ng-change="vm.documentTypeChangeHandler(passengerNumber)" class="ui-select-custom ui-select-passengers" ui-select-custom="" error-highlight="{{vm.submitTouched}}" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.passengersInfo.documentType\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="doc.code as doc in vm.documentTypesByPassenger[passengerNumber]"><div class="{{ \'documentTypeOption_\' + doc.code }}" ng-bind-html="doc.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.documentType\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" <error-message="" control="vm.passengerForms[passengerNumber].documentNumber" touched="vm.submitTouched"><info-message ng-if="passenger.documentType && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType)" touched="vm.submitTouched" control="vm.passengerForms[passengerNumber].documentNumber" format-alias="\'web.messages.formatDocumentNumber.\' + passenger.documentType"></info-message><input type="text" name="documentNumber" autocomplete="off" ng-model="passenger.documentNumber" required="" clean-document-number="" ng-pattern="vm.documentNumberRegexByPassenger[passengerNumber]" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentNumber\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode)"><error-message control="vm.passengerForms[passengerNumber].documentDate" touched="vm.submitTouched"></error-message><input type="text" name="documentDate" autocomplete="off" ng-model="passenger.documentDate" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode) }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentDate\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && (vm.passengersCheck.allowEmail || vm.passengersCheck.allowPhone)"><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowPhone"><error-message control="vm.passengerForms[passengerNumber].phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="passenger.phone" ng-blur="vm.phoneBlurHandler(passengerNumber)" phone-mask="" ng-required="vm.passengersCheck.requirePhone" ng-pattern="\'customer.phoneRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" placeholder=""> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowEmail"><error-message control="vm.passengerForms[passengerNumber].email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="passenger.email" ng-blur="vm.emailBlurHandler(passengerNumber)" ng-required="vm.passengersCheck.requireEmail" ng-pattern="vm.passengersCheck.emailRegex" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.email\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && vm.allowBonusCard"><td><div class="inp"><div class="customCheckbox"><label><input class="haveCart_js" type="checkbox" name="hasBonusCard" ng-model="passenger.hasBonusCard" ng-change="passenger.bonusCard = \'\';"><span></span> {{ \'web.passengersInfo.hasBonusCard\' | aliasStatic}}</label></div></div></td><td><div class="inp inp-animate-outer" ng-class="{ invisibleBonusCard: !passenger.hasBonusCard, visibleBonusCard: passenger.hasBonusCard }"><error-message control="vm.passengerForms[passengerNumber].bonusCard" touched="vm.submitTouched"></error-message><input type="text" class="inp-animate-placeholder" name="bonusCard" autocomplete="off" ng-model="passenger.bonusCard" ng-pattern="\'passengers.bonusCardRegex\' | param" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.bonusCard\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr></tbody></table></div></div></form><form ng-if="vm.orderInfo && vm.passengersCheck" name="vm.customerForm" class="customerForm__js" form-submit-error-highlight="" novalidate=""><div class="item item_contact"><div class="item__i"><h3 class="itemName">{{ \'web.passengersInfo.customerHeader\' | aliasStatic}}</h3><table><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="vm.customer.lastName" required="" ng-pattern="\'customer.lastNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="vm.customer.firstName" required="" ng-pattern="\'customer.firstNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.firstName\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="vm.customer.phone" phone-mask="" ng-pattern="\'customer.phoneRegexp\' | param" required="" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="vm.customer.email" required="" ng-pattern="\'site.emailRegexp\' | param" ng-change="vm.checkLogin()" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.email\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="!vm.authoriseCustomer && vm.allowCreateAccount && vm.customer.createAccount"><td><div class="inp"><error-message control="vm.customerForm.password" touched="vm.submitTouched"></error-message><input type="password" name="password" autocomplete="off" ng-model="vm.customer.password" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.passwordRepeat }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1000" placeholder="{{ \'web.customerInfo.password\' | aliasStatic}}"></div></td><td><div class="inp"><error-message control="vm.customerForm.passwordRepeat" touched="vm.submitTouched"></error-message><input type="password" name="passwordRepeat" autocomplete="off" ng-model="vm.customer.passwordRepeat" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.password }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1001" placeholder="{{ \'web.customerInfo.passwordRepeat\' | aliasStatic}}"></div></td></tr><tr ng-if="(\'customer.showIsSmsSend\' | param) || (\'customer.showIsEmailSend\' | param)"><td><div class="inp" ng-if="\'customer.showIsSmsSend\' | param"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.sendSms"> <span></span> {{ \'web.customerInfo.sendSms\' | aliasStatic}}</label></div></div></td><td><div class="inp" ng-if="\'customer.showIsEmailSend\' | param"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.sendEMail"> <span></span> {{ \'web.customerInfo.sendEMail\' | aliasStatic}}</label></div></div></td></tr><tr><td colspan="2"><div class="inp" ng-if="!vm.authoriseCustomer && vm.allowCreateAccount"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.createAccount"> <span></span> {{ \'web.passengersInfo.createAccountInvitationMessage\' | aliasStatic}}</label></div></div></td></tr></tbody></table></div></div></form><p class="login" ng-if="!vm.authoriseCustomer && vm.accountExist">{{ \'web.passengersInfo.accountExistMessage\' | aliasStatic}} {{ vm.customer.email }} <a href="" fancybox="popupLogin" data-login="{{ vm.customer.email }}">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><div ng-if="vm.errorMessage" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.errorMessage | aliasDynamic"></p></div></div><div ng-if="\'passengers.usePersonalDataAgreeCheckbox\' | param" class="iconfirm"><div class="iconfirm__i"><div class="customCheckbox"><label><input type="checkbox" id="personalDataShareAgreeChb" ng-model="vm.personalDataShareAgree"><span></span></label></div><p><label for="personalDataShareAgreeChb"><wrap ng-bind-html="\'web.personalDataShareAgree\' | aliasStatic"></wrap></label></p></div></div><div class="passengers-form-footer" ng-bind-html="\'web.passengersInfo.footer\' | aliasStatic"></div></div></div><div class="searchResultsControl"><div class="searchResultsControl__i"><a href="#{{$root.ROUTES.SEARCH}}" class="btn btn_back">{{ \'web.buttons.back\' | aliasDynamic }}</a> <a href="" ng-click="vm.submitHandler()" class="btn btn_next" ng-class="{ disabled: (!vm.personalDataShareAgree && (\'passengers.usePersonalDataAgreeCheckbox\' | param)) }" ng-if="!vm.submitLoading"><span class="mobileHide">{{ \'web.buttons.gotoExtraServices\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a> <a href="" class="btn btn_next disabled loading-start" ng-if="vm.submitLoading"><span class="loader"><img alt="" src="themes/websky/assets/static/img/general/form/loader-circle-64.gif"></span> <span class="mobileHide">{{ \'web.buttons.gotoExtraServices\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer>');
+!function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/es-meal/es-meal.html",'<div class="item__i mobileHide"><div class="top"><div class="top__i"><table><tbody><tr><td><div class="text"><div class="iconBox" ng-click="vm.switchService()"><i class="icon_meal"></i></div><div class="name"><h2>{{ \'web.extraServices.meal.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.meal"><span class="infoBoxWrap"><i class="icon_info"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.serviceDesc\' | aliasStatic}}</span></span></span></a></h2><p>{{ \'web.extraServices.meal.desc\' | aliasStatic}}</p></div></div></td><td><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3></div></div></td><td><a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.meal.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.meal.deselect\' | aliasStatic}}</span></a></td></tr></tbody></table></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="foodSelect"><div class="foodSelect__i"><div class="passengersBlock"><div class="passengersBlock_row"><div class="passengersBlock_row-control"><div class="passengersBlock_row-control-outer" ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights"><div class="passengersBlock_row-control-passengers" ng-click="vm.selectFlightPassenger(flightNum, 0)" ng-class="{active:flightNum == vm.selectedFlight}"><i class="passengersBlock_row-control-passengers-icon" aria-hidden="true"></i> <span class="passengersBlock_row-control-passengers-racenumber">{{flight.racenumber}}</span><geo-marker prefix="dep__point" key="es-meal" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker><i class="passengersBlock_row-control-passengers-delimiter" aria-hidden="true"></i><geo-marker prefix="arr__point" key="es-meal" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker></div><div class="passengersBlock_row-control-droporder" ng-show="flightNum == vm.selectedFlight"><div class="passengersBlock_row-control-droporder-passenger" ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]"><div class="passengersBlock_row-control-droporder-passenger-outer" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" ng-class="{active: passengerNum == vm.selectedPassenger}"><i class="passengersBlock_row-control-droporder-passenger-icon" aria-hidden="true"></i> <span class="passengersBlock_row-control-droporder-passenger-name">{{ passenger.lastName }} {{ passenger.firstName }}</span></div><div ng-if="vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum]" class="passengersBlock_row-control-droporder-passenger-order" ng-repeat="(indexMealSelect, itemMealSelect) in vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum] track by $index"><div class="passengersBlock_row-control-droporder-passenger-order-outer"><span>{{itemMealSelect.title}}</span> <span ng-bind-html="{ value: itemMealSelect.totalPrice, currency: itemMealSelect.currency } | price"></span> <i class="passengersBlock_row-control-droporder-passenger-order-remove" ng-click="vm.selectFlightPassenger(flightNum, passengerNum); vm.removePassengerFlightMeal(passengerNum, flightNum)" aria-hidden="true"></i></div></div></div></div></div></div><div class="passengersBlock_row-menu"><div ng-if="!vm.mealMenu" class="passengersBlock_row-menu__no-food">{{ \'web.extraServices.meal.noFood\' | aliasStatic}}</div>{{ vm.service.subgroups | json }}<div class="passengersBlock_row-menu-foodSorting"><ul><li ng-class="{ active: vm.mealMenuSubgroup === false }"><a href="" ng-click="vm.mealMenuSubgroup = false">{{ \'web.meal.subgroup.\' | aliasWithPrefix:\'all\' }}</a></li><li ng-repeat="(subgroupNum, subgroupCode) in vm.service.subgroups" ng-class="{ active: vm.mealMenuSubgroup === subgroupNum }"><a href="" ng-click="vm.mealMenuSubgroup = subgroupNum">{{ \'web.meal.subgroup.\' | aliasWithPrefix:subgroupCode }}</a></li></ul></div><div class="list customScroll_height customScroll_js" custom-scroll=""><div class="list__i isotopeGrid"><wrap ng-repeat="(subgroupNum, subgroup) in vm.mealMenu"><div ng-repeat="mealItem in subgroup" ng-if="vm.mealMenuSubgroup === subgroupNum || vm.mealMenuSubgroup === false" ng-class="{ active: mealItem.active, control_disabled: vm.locked }" class="item"><div class="food_wrap"><div class="img"><span class="item__status-count" ng-if="mealItem.alreadySelectedCount">{{ mealItem.alreadySelectedCount }}</span> <img ng-src="{{vm.mealImagesPath}}/{{ mealItem.serviceType }}-{{ mealItem.rfisc }}.jpg" alt=""></div><div class="food_info"><div class="name"><p>{{ mealItem.title }}</p><p class="price" ng-bind-html="{ value: mealItem.price, currency: mealItem.currency } | price"></p></div><div class="description"><a ng-if="vm.hasAlias(\'web.extraServices.meal.ingredientsDescriptionContent.\' + mealItem.serviceType + \'.\' + mealItem.rfisc)" href="" fancybox="popupAlias" class="link link--ingredientsDescription" data-popup-alias="web.extraServices.meal.ingredientsDescriptionContent.{{mealItem.serviceType}}.{{mealItem.rfisc}}">{{ \'web.extraServices.meal.ingredientsDescriptionLabel\' | aliasStatic }}</a><p ng-bind-html="mealItem.description"></p></div><button class="item__btn" ng-click="vm.mealCountChangeHandler(subgroupNum, mealItem, +1)" ng-if="mealItem.alreadySelectedCount < 1">{{ \'web.extraServices.meal.choose\' | aliasStatic}}</button> <button class="item__btn" ng-click="vm.mealCountChangeHandler(subgroupNum, mealItem, +1)" ng-if="mealItem.alreadySelectedCount > 0 && mealItem.alreadySelectedCount !== mealItem.limit">{{ \'web.extraServices.meal.addAnother\' | aliasStatic}}</button> <button class="item__btn" ng-class="{selected: mealItem.alreadySelectedCount == mealItem.limit}" ng-if="mealItem.alreadySelectedCount == mealItem.limit">{{ \'web.extraServices.meal.selected\' | aliasStatic}}</button></div></div></div></wrap></div></div></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.meal.cancel\' | aliasStatic }}</a></div></div></div></div></div></div></div><div class="item__i mobileShow"><div class="top"><div class="top__i"><a href=""><div class="row"><table><tbody><tr><td><i class="icon_meal"></i></td><td><div class="name">{{ \'web.extraServices.meal.header\' | aliasStatic}} <a href="" fancybox="popupAlias" data-popup-alias="web.extraServicesRules.meal"><i class="icon_info"></i></a></div></td></tr></tbody></table></div></a><div class="row"><a href=""><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div><div ng-if="!vm.service.active && vm.service.minPrice" class="price"><div class="price__i"><p>{{ \'web.extraServices.minPrice\' | aliasStatic}}</p><h3 ng-bind-html="{ value: vm.service.minPrice.price, currency: vm.service.minPrice.currency } | price"></h3></div></div></a> <a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.meal.select\' | aliasStatic}}</span> <span class="hide">{{ \'web.extraServices.meal.deselect\' | aliasStatic}}</span></a></div></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="foodSelect drop_mobile"><div class="foodSelect__i"><div class="passengersContainer"><div class="passengersTableContainer" ng-class="{ one_passenger: (vm.getAvailablePassengersCount(vm.service.availableByPassengerSegments) == 1) }"><a href="" ng-click="vm.scrollToEnd();" class="passengersTableContainer__control passengersTableContainer__control_next" ng-class="{ control_disabled: !vm.canScrollRight }"></a><table class="passengersTable passengersTableMobile"><tbody><tr class="headRow"><td class="firstCol"><a href="" ng-click="vm.scrollToStart();" class="passengersTable__control passengersTable__control_prev" ng-class="{ control_disabled: !vm.canScrollLeft }"></a></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]">{{ passenger.lastName }} {{ passenger.firstName }}</td></tr><tr ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-if="vm.service.availableBySegments[flightNum]" class="contentRow"><td class="firstCol"><div class="date">{{ flight.date | formatDate: \'D MMMM, dd\'}}</div><div class="route"><div class="route__dep"><span class="route__dep__city">{{ flight.originport }}</span></div><div class="route__plane"><i class="icon_plane"></i></div><div class="route__arr"><span class="route__arr__city">{{ flight.destinationport }}</span></div></div></td><td ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.service.availableByPassengerSegments[passengerNum]" ng-class="{ active: vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum }" ng-init="selectedPassengerFlightMeals = vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum]"><div ng-if="!selectedPassengerFlightMeals"><a href="" fancybox="popupMeal" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_select: (!selectedPassengerFlightMeals && vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum) }"><wrap ng-if="vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum">{{ \'web.extraServices.meal.selectItem\' | aliasStatic}}</wrap><wrap ng-if="!(vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum)">{{ \'web.extraServices.meal.noneSelected\' | aliasStatic}}</wrap></a></div><div ng-if="selectedPassengerFlightMeals" ng-repeat="(indexMealSelect, itemMealSelect) in selectedPassengerFlightMeals track by $index"><a href="" fancybox="popupMeal" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" class="passengersTable__link" ng-class="{ passengersTable__link_empty: !selectedPassengerFlightMeals }"><wrap ng-if="selectedPassengerFlightMeals">{{ itemMealSelect.title }}</wrap></a> <span ng-if="selectedPassengerFlightMeals" class="passengersTable__priceSeat" ng-bind-html="{ value: itemMealSelect.totalPrice, currency: itemMealSelect.currency } | price"></span> <a ng-if="selectedPassengerFlightMeals" href="" ng-click="vm.removePassengerFlightMeal(passengerNum, flightNum)" class="btn-remove"><span class="infoBoxWrap"><i class="icon_remove"></i> <span class="infoBox"><span class="infoBox__i">{{ \'web.extraServices.meal.cancelByPassengerSegment\' | aliasStatic }}</span></span></span></a></div></td></tr></tbody></table></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" class="passengersTable__link passengersTable__link_cancel">{{ \'web.extraServices.meal.cancel\' | aliasStatic}}</a></div></div></div></div></div><popup-meal menu="vm.mealMenu" passenger="vm.orderInfo.passengers[vm.selectedPassenger]" flight="vm.orderInfo.plainFlights[vm.selectedFlight]" handler="vm.mealCountChangeHandler" path="vm.mealImagesPath" subgroups="vm.service.subgroups"></popup-meal></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/passengers/passengers.html",'<app-loader ng-if="vm.loading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="searchSteps"><div class="wrap"><div class="searchSteps__i"><ol><li class="prev"><a href="{{ \'site.mainPageUrl\' | param }}">{{ \'web.steps.search\' | aliasStatic}}</a></li><li class="prev"><a href="#{{$root.ROUTES.SEARCH}}">{{ \'web.steps.selectVariant\' | aliasStatic}}</a></li><li class="active">{{ (vm.passengers.length == 1) ? ( \'web.steps.passenger\' | aliasStatic) : ( \'web.steps.passengers\' | aliasStatic) }}</li><li>{{ \'web.steps.extraServices\' | aliasStatic}}</li><li>{{ \'web.steps.payment\' | aliasStatic}}</li><li>{{ \'web.steps.order\' | aliasStatic}}</li></ol></div></div></div><div ng-if="vm.orderInfo && vm.passengersCheck" class="searchParams searchParams_passengers"><div class="wrap"><div class="searchParams__i"><div class="info"><ul><li><geo-marker prefix="dep__point" key="passengers" city="vm.orderInfo.flights[0].flights[0].origincity" cityname="vm.orderInfo.flights[0].flights[0].origincityName" port="vm.orderInfo.flights[0].flights[0].originport" portname="vm.orderInfo.flights[0].flights[0].originportName"></geo-marker>–<geo-marker prefix="arr__point" key="passengers" city="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcity" cityname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationcityName" port="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationport" portname="vm.orderInfo.flights[0].flights[vm.orderInfo.flights[0].flights.length-1].destinationportName"></geo-marker></li><li ng-show="vm.orderInfo.flights.length == 2">{{ \'web.searchForm.roundtrip\' | aliasStatic}}</li><li ng-show="vm.orderInfo.flights.length == 1">{{ \'web.searchForm.oneway\' | aliasStatic}}</li><li>{{ vm.getDescPassCountStr() }}</li></ul></div></div></div></div><div class="content"><div class="wrap wrap_pt32"><div class="content__i"><div class="passengersInfo"><div class="passengersInfo__i"><h2>{{ (vm.passengers.length == 1) ? ( \'web.passengerInfo.header\' | aliasStatic) : ( \'web.passengersInfo.header\' | aliasStatic) }}</h2><p ng-if="vm.passengersCheck.isLatinNamesOnly && !(\'site.foreignSite\' | param)" class="intAttention">{{ \'web.messages.passNamesLabel\' | aliasStatic}} <span ng-bind-html="\'web.messages.passNamesLatin\' | aliasStatic"></span></p><p class="login" ng-if="!vm.authoriseCustomer && !vm.accountExist">{{ \'web.passengersInfo.loginInvitationMessage\' | aliasStatic}} <a href="" fancybox="popupLogin">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><form class="passengerForm__js {{ vm.getOrderCountriesCssClasses() }}" ng-repeat="(passengerNumber, passenger) in vm.passengers" name="vm.passengerForms[{{passengerNumber}}]" form-submit-error-highlight="" novalidate=""><input type="hidden" name="categoryCode" ng-model="passenger.categoryCode"><div class="item"><div class="item__i"><div class="itemName"><div class="itemName__number"><span ng-show="vm.passengers.length > 1">{{ passengerNumber + 1 }}.</span> {{ \'web.passengerCategory.\' | aliasWithPrefix:passenger.categoryCode }}</div><div class="selectWrap itemName__ui-select" ng-if="vm.authoriseCustomer && vm.privatePassengers.length"><ui-select name="privatePassenger" search-enabled="false" ng-model="passenger.privatePassenger" theme="selectize" ui-select-custom="" ng-change="vm.setPrivatePassenger(passengerNumber)" class="ui-select-passengers-header"><ui-select-match placeholder="{{(vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName) || ( \'web.passengersInfo.privatePassengerSelect\' | aliasStatic)}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}">{{vm.currentLanguage !== \'ru\' && $select.selected.value.firstNameEn ? $select.selected.value.firstNameEn : $select.selected.value.firstName}} {{vm.currentLanguage !== \'ru\' && $select.selected.value.lastNameEn ? $select.selected.value.lastNameEn : $select.selected.value.lastName}}</ui-select-match><ui-select-choices repeat="privatePassenger.num as (num, privatePassenger) in vm.privatePassengers"><div class="ui-select-passengers-data">{{ vm.currentLanguage !== \'ru\' && privatePassenger.value.firstNameEn ? privatePassenger.value.firstNameEn : privatePassenger.value.firstName }} {{ vm.currentLanguage !== \'ru\' && privatePassenger.value.lastNameEn ? privatePassenger.value.lastNameEn : privatePassenger.value.lastName }}</div><div class="ui-select-passengers-birth">{{ privatePassenger.value.dateOfBirth }}</div></ui-select-choices></ui-select></div></div><table class="passengerInfo"><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="passenger.lastName" ng-blur="vm.lastNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerLastNameLatRegexp : vm.passengersCheck.passengerLastNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="passenger.firstName" ng-blur="vm.firstNameBlurHandler(passengerNumber)" required="" ng-pattern="(passenger.documentType == \'PSP\') ? vm.passengerFirstNameLatRegexp : vm.passengersCheck.passengerFirstNameRegexp" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.firstName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].dateOfBirth" touched="vm.submitTouched"></error-message><input type="text" name="dateOfBirth" autocomplete="off" ng-model="passenger.dateOfBirth" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.rangeBirthByPassenger[passengerNumber].from }}" data-max-date="{{ vm.rangeBirthByPassenger[passengerNumber].to }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.dateOfBirth\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].gender" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.gender" theme="selectize" name="gender" search-enabled="false" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.privatePassengers.gender\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="gender.code as gender in vm.passangersAlias"><div ng-bind-html="gender.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.gender\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].nationality" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.nationality" theme="selectize" name="nationality" search-enabled="{{ !vm.isMobile }}" skip-focusser="true" ng-change="vm.nationalityChangeHandler(passengerNumber)" error-highlight="{{vm.submitTouched}}" ui-select-custom="" class="ui-select-custom ui-select-passengers" required=""><ui-select-match placeholder="{{$select.selected[vm.localNamePropName] || ( \'web.privatePassengers.nationality\' | aliasStatic) }}">{{$select.selected[vm.localNamePropName]}}</ui-select-match><ui-select-choices repeat="country.code as country in vm.countriesList | filter: {[vm.localNamePropName]: $select.search} track by country.code"><div ng-bind-html="country[vm.localNamePropName]"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.nationality\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.passengerForms[passengerNumber].documentType" touched="vm.submitTouched"></error-message><ui-select ng-model="passenger.documentType" name="documentType" theme="selectize" search-enabled="false" ng-change="vm.documentTypeChangeHandler(passengerNumber)" class="ui-select-custom ui-select-passengers" ui-select-custom="" error-highlight="{{vm.submitTouched}}" required=""><ui-select-match placeholder="{{$select.selected.name || ( \'web.passengersInfo.documentType\' | aliasStatic) }}">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat="doc.code as doc in vm.documentTypesByPassenger[passengerNumber]"><div class="{{ \'documentTypeOption_\' + doc.code }}" ng-bind-html="doc.name"></div></ui-select-choices></ui-select><label class="inp-animate-label"><span>{{ \'web.passengersInfo.label.documentType\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" <error-message="" control="vm.passengerForms[passengerNumber].documentNumber" touched="vm.submitTouched"><info-message ng-if="passenger.documentType && vm.hasAlias(\'web.messages.formatDocumentNumber.\' + passenger.documentType)" touched="vm.submitTouched" control="vm.passengerForms[passengerNumber].documentNumber" format-alias="\'web.messages.formatDocumentNumber.\' + passenger.documentType"></info-message><input type="text" name="documentNumber" autocomplete="off" ng-model="passenger.documentNumber" required="" clean-document-number="" ng-pattern="vm.documentNumberRegexByPassenger[passengerNumber]" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentNumber\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode)"><error-message control="vm.passengerForms[passengerNumber].documentDate" touched="vm.submitTouched"></error-message><input type="text" name="documentDate" autocomplete="off" ng-model="passenger.documentDate" required="" check-date-format="" check-date-range="" data-min-date="{{ vm.getExpiryByDocType(passenger.documentType, passenger.categoryCode) }}" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" ui-mask="99.99.9999" model-view-value="true" ui-mask-placeholder="{{ \'web.datePattern\' | aliasStatic}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.documentDate\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && (vm.passengersCheck.allowEmail || vm.passengersCheck.allowPhone)"><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowPhone"><error-message control="vm.passengerForms[passengerNumber].phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="passenger.phone" ng-blur="vm.phoneBlurHandler(passengerNumber)" phone-mask="" ng-required="vm.passengersCheck.requirePhone" ng-pattern="\'customer.phoneRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}" placeholder=""> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer" ng-if="vm.passengersCheck.allowEmail"><error-message control="vm.passengerForms[passengerNumber].email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="passenger.email" ng-blur="vm.emailBlurHandler(passengerNumber)" ng-required="vm.passengersCheck.requireEmail" ng-pattern="vm.passengersCheck.emailRegex" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.email\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr><tr ng-if="(passenger.categoryCode == \'AAA\' || passenger.categoryCode == \'CPA\' || passenger.categoryCode == \'MLA\') && vm.allowBonusCard"><td><div class="inp"><div class="customCheckbox"><label><input class="haveCart_js" type="checkbox" name="hasBonusCard" ng-model="passenger.hasBonusCard" ng-change="passenger.bonusCard = \'\';"><span></span> {{ \'web.passengersInfo.hasBonusCard\' | aliasStatic}}</label></div></div></td><td><div class="inp inp-animate-outer" ng-class="{ invisibleBonusCard: !passenger.hasBonusCard, visibleBonusCard: passenger.hasBonusCard }"><error-message control="vm.passengerForms[passengerNumber].bonusCard" touched="vm.submitTouched"></error-message><input type="text" class="inp-animate-placeholder" name="bonusCard" autocomplete="off" ng-model="passenger.bonusCard" ng-pattern="\'passengers.bonusCardRegex\' | param" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.passengersInfo.bonusCard\' | aliasStatic}}</span></label></div></td><td class="mobileHide"></td><td class="mobileHide"></td></tr></tbody></table></div></div></form><form ng-if="vm.orderInfo && vm.passengersCheck" name="vm.customerForm" class="customerForm__js" form-submit-error-highlight="" novalidate=""><div class="item item_contact"><div class="item__i"><h3 class="itemName">{{ \'web.passengersInfo.customerHeader\' | aliasStatic}}</h3><table><tbody><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.lastName" touched="vm.submitTouched"></error-message><input type="text" name="lastName" autocomplete="off" ng-model="vm.customer.lastName" required="" ng-pattern="\'customer.lastNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.lastName\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.firstName" touched="vm.submitTouched"></error-message><input type="text" name="firstName" autocomplete="off" ng-model="vm.customer.firstName" required="" ng-pattern="\'customer.firstNameRegexp\' | param" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.firstName\' | aliasStatic}}</span></label></div></td></tr><tr><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.phone" format-alias="\'web.messages.formatPhone\'" touched="vm.submitTouched"></error-message><input type="tel" name="phone" autocomplete="off" ng-model="vm.customer.phone" phone-mask="" ng-pattern="\'customer.phoneRegexp\' | param" required="" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.phone\' | aliasStatic}}</span></label></div></td><td><div class="inp inp-animate-outer"><error-message control="vm.customerForm.email" touched="vm.submitTouched"></error-message><input type="email" name="email" autocomplete="off" ng-model="vm.customer.email" required="" ng-pattern="\'site.emailRegexp\' | param" ng-change="vm.checkLogin()" class="textInp inp-animate-placeholder" error-highlight="{{vm.submitTouched}}"> <label class="inp-animate-label"><span>{{ \'web.customerInfo.email\' | aliasStatic}}</span></label></div></td></tr><tr ng-if="!vm.authoriseCustomer && vm.allowCreateAccount && vm.customer.createAccount"><td><div class="inp"><error-message control="vm.customerForm.password" touched="vm.submitTouched"></error-message><input type="password" name="password" autocomplete="off" ng-model="vm.customer.password" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.passwordRepeat }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1000" placeholder="{{ \'web.customerInfo.password\' | aliasStatic}}"></div></td><td><div class="inp"><error-message control="vm.customerForm.passwordRepeat" touched="vm.submitTouched"></error-message><input type="password" name="passwordRepeat" autocomplete="off" ng-model="vm.customer.passwordRepeat" required="" ng-pattern="\'site.passwordRegexp\' | param" check-equals="{{ vm.customer.password }}" class="textInp" error-highlight="{{vm.submitTouched}}" tabindex="1001" placeholder="{{ \'web.customerInfo.passwordRepeat\' | aliasStatic}}"></div></td></tr><tr ng-if="(\'customer.showIsSmsSend\' | param) || (\'customer.showIsEmailSend\' | param)"><td><div class="inp" ng-if="\'customer.showIsSmsSend\' | param"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.sendSms"> <span></span> {{ \'web.customerInfo.sendSms\' | aliasStatic}}</label></div></div></td><td><div class="inp" ng-if="\'customer.showIsEmailSend\' | param"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.sendEMail"> <span></span> {{ \'web.customerInfo.sendEMail\' | aliasStatic}}</label></div></div></td></tr><tr><td colspan="2"><div class="inp" ng-if="!vm.authoriseCustomer && vm.allowCreateAccount"><div class="customCheckbox"><label><input type="checkbox" ng-model="vm.customer.createAccount"> <span></span> {{ \'web.passengersInfo.createAccountInvitationMessage\' | aliasStatic}}</label></div></div></td></tr></tbody></table></div></div></form><p class="login" ng-if="!vm.authoriseCustomer && vm.accountExist">{{ \'web.passengersInfo.accountExistMessage\' | aliasStatic}} {{ vm.customer.email }} <a href="" fancybox="popupLogin" data-login="{{ vm.customer.email }}">{{ \'web.passengersInfo.loginInvitationLink\' | aliasStatic}}</a></p><div ng-if="vm.errorMessage" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.errorMessage | aliasDynamic"></p></div></div><div ng-if="\'passengers.usePersonalDataAgreeCheckbox\' | param" class="iconfirm"><div class="iconfirm__i"><div class="customCheckbox"><label><input type="checkbox" id="personalDataShareAgreeChb" ng-model="vm.personalDataShareAgree"><span></span></label></div><p><label for="personalDataShareAgreeChb"><wrap ng-bind-html="\'web.personalDataShareAgree\' | aliasStatic"></wrap></label></p></div></div><div class="passengers-form-footer" ng-bind-html="\'web.passengersInfo.footer\' | aliasStatic"></div></div></div><div class="searchResultsControl"><div class="searchResultsControl__i"><a href="#{{$root.ROUTES.SEARCH}}" class="btn btn_back">{{ \'web.buttons.back\' | aliasDynamic }}</a> <a href="" ng-click="vm.submitHandler()" class="btn btn_next" ng-class="{ disabled: (!vm.personalDataShareAgree && (\'passengers.usePersonalDataAgreeCheckbox\' | param)) }" ng-if="!vm.submitLoading"><span class="mobileHide">{{ \'web.buttons.gotoExtraServices\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a> <a href="" class="btn btn_next disabled loading-start" ng-if="vm.submitLoading"><span class="loader"><img alt="" src="themes/websky/assets/static/img/general/form/loader-circle-64.gif"></span> <span class="mobileHide">{{ \'web.buttons.gotoExtraServices\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer>');
 }])}();
\ No newline at end of file
diff --git a/gulpfile.js b/gulpfile.js
index 668b85f..2c0cf3b 100644
--- a/gulpfile.js
+++ b/gulpfile.js
@@ -1,13 +1,19 @@
 (function() {
 
     var gulp = require('gulp'),
+        sourcemaps = require('gulp-sourcemaps'),
+        browserify = require('browserify'),
+        strictify = require('strictify'),
+        sass = require('gulp-sass'),
         del = require('del'),
         ngHtml2Js = require('gulp-ng-html2js'),
         minifyHtml = require('gulp-minify-html'),
         uglify = require('gulp-uglify'),
         concat = require('gulp-concat'),
         stylus = require('gulp-stylus'),
-        autoprefixer = require('autoprefixer-stylus');
+        autoprefixer = require('gulp-autoprefixer'),
+        source = require('vinyl-source-stream'),
+        buffer = require('vinyl-buffer');
 
     gulp.task('clean', function() {
         return del('build');
@@ -31,12 +37,35 @@
             .pipe(gulp.dest('build/'));
     });
 
+    gulp.task('build:css', function(){
+        return gulp.src('src/css/**/*.sass')
+            .pipe(sourcemaps.init())
+            .pipe(sass().on('error', sass.logError))
+            .pipe(autoprefixer({
+                browsers: ['last 5 versions'],
+                cascade: false
+            }))
+            .pipe(sourcemaps.write())
+            .pipe(gulp.dest('build/index.css/'));
+    });
+
+    gulp.task('build:js', function () {
+        return browserify('src/index.js', { transform: strictify })
+            .bundle()
+            .pipe(source('controllers-nordstar-test.js'))
+            .pipe(buffer())
+            .pipe(sourcemaps.init({loadMaps: true}))
+            .pipe(uglify())
+            .pipe(sourcemaps.write('./'))
+            .pipe(gulp.dest('build/'));
+    });
+
 
     gulp.task('watch', function() {
-        gulp.watch('src/**/*.*', gulp.series('build:html'));
+        gulp.watch('src/**/*.*', gulp.series('build:html', 'build:css', 'build:js'));
     });
 
-    gulp.task('build', gulp.series('build:html'));
+    gulp.task('build', gulp.series('build:html', 'build:css', 'build:js'));
 
     gulp.task('default', gulp.series('build', 'watch'));
 
diff --git a/package.json b/package.json
index 5475af7..e70b7c2 100644
--- a/package.json
+++ b/package.json
@@ -18,5 +18,13 @@
     "gulp-stylus": "^2.6.0",
     "gulp-uglify": "1.5.1"
   },
-  "dependencies": {}
+  "dependencies": {
+    "browserify": "^16.2.2",
+    "gulp-autoprefixer": "^5.0.0",
+    "gulp-sass": "^4.0.1",
+    "gulp-sourcemaps": "^2.6.4",
+    "strictify": "^0.2.0",
+    "vinyl-buffer": "^1.0.1",
+    "vinyl-source-stream": "^2.0.0"
+  }
 }
diff --git a/src/components/es-meal/es-meal.html b/src/components/es-meal/es-meal.html
index 8320948..0152c72 100644
--- a/src/components/es-meal/es-meal.html
+++ b/src/components/es-meal/es-meal.html
@@ -114,7 +114,9 @@
                                 {{ 'web.extraServices.meal.noFood' | aliasStatic}}
                               </div>
 
-                                <div ng-if=" vm.service.subgroups.length > 1 && vm.mealMenu" class="passengersBlock_row-menu-foodSorting">
+                                <!--<div ng-if=" vm.service.subgroups.length > 1 && vm.mealMenu" class="passengersBlock_row-menu-foodSorting">-->
+                                {{ vm.service.subgroups | json }}
+                                <div class="passengersBlock_row-menu-foodSorting">
                                     <ul>
                                         <li ng-class="{ active: vm.mealMenuSubgroup === false }">
                                             <a href ng-click="vm.mealMenuSubgroup = false">{{ 'web.meal.subgroup.' | aliasWithPrefix:'all' }}</a>
diff --git a/src/components/es-meal/es-meal.js b/src/components/es-meal/es-meal.js
index e69de29..72883b0 100644
--- a/src/components/es-meal/es-meal.js
+++ b/src/components/es-meal/es-meal.js
@@ -0,0 +1,186 @@
+angular.module('app').component('esMeal', {
+    templateUrl: 'components/es-meal/es-meal.html',
+    controller: ['$scope', '$element', 'backend', 'utils', MealController],
+    controllerAs: 'vm',
+    bindings: {
+        service: '=service',
+        locked: '=locked'
+    }
+});
+
+function MealController($scope, $element, backend, utils) {
+
+    var vm = this,
+        passengersTableContainer = $element.find('div.passengersTableContainer');
+
+    console.log('hello');
+
+    vm.switchService = switchService;
+    vm.selectFlightPassenger = selectFlightPassenger;
+    vm.selectFirstAvailablePassengerFlight = selectFirstAvailablePassengerFlight;
+    vm.mealCountChangeHandler = mealCountChangeHandler;
+    vm.removePassengerFlightMeal = removePassengerFlightMeal;
+    vm.getSelectedPassengerFlightMeal = getSelectedPassengerFlightMeal;
+    vm.scrollToStart = scrollToStart;
+    vm.scrollToEnd = scrollToEnd;
+    vm.hasAlias = backend.hasAlias;
+    vm.getAvailablePassengersCount = utils.getAvailablePassengersCount;
+    vm.checkServiceRemovalProhibited = backend.checkServiceRemovalProhibited;
+
+    vm.canScrollRight = true;
+    vm.canScrollLeft = false;
+
+    vm.selectedFlight = 0;
+    vm.selectedPassenger = 0;
+
+    if (backend.getParam('site.externalStorageBaseUrl')) {
+        vm.mealImagesPath = backend.getParam('site.externalStorageBaseUrl') + '/img/content/meal';
+    } else {
+        vm.mealImagesPath = './themes/websky/assets/static/img/content/meal';
+    }
+
+    backend.addOrderInfoListener(function (orderInfo) {
+        vm.orderInfo = orderInfo;
+    }, false, true);
+
+    $scope.$watch('vm.service', function () {
+        updateMealMenu();
+    });
+
+    passengersTableContainer.on('scroll', mobileTableScrollHandler);
+
+    if (vm.service.active) {
+        updateMealMenu();
+    }
+
+    function switchService() {
+        if (!vm.locked && !backend.checkServiceRemovalProhibited('meal')) {
+            vm.service.active = !vm.service.active;
+            if (vm.service.active) {
+                selectFirstAvailablePassengerFlight();
+            } else {
+                backend.removeExtraService({
+                    code: 'meal'
+                });
+            }
+        }
+    }
+
+    function selectFlightPassenger(flightNum, passengerNum) {
+        vm.selectedFlight = flightNum;
+        vm.selectedPassenger = passengerNum;
+        updateMealMenu();
+    }
+
+    function selectFirstAvailablePassengerFlight() {
+        vm.selectedFlight = getFirstAvailableFlightNum();
+        vm.selectedPassenger = getFirstAvailablePassengerNum(vm.selectedFlight);
+        updateMealMenu();
+    }
+
+    function updateMealMenu() {
+        vm.mealMenu = vm.service.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight];
+        vm.mealMenuSubgroup = false;
+    }
+
+    function mealCountChangeHandler(subgroupNum, mealItem, delta) {
+        if (!vm.locked) {
+            backend.modifyExtraService({
+                code: 'meal',
+                passenger_id: vm.orderInfo.passengers[vm.selectedPassenger].id,
+                segment_id: vm.orderInfo.plainFlights[vm.selectedFlight].id,
+                subgroup: vm.service.subgroups[subgroupNum],
+                amount: (mealItem.alreadySelectedCount || 0) + delta,
+                service_type: mealItem.serviceType,
+                rfisc: mealItem.rfisc
+            });
+        }
+    }
+
+    function removePassengerFlightMeal(passengerNum, flightNum) {
+        if (!vm.locked && !backend.checkServiceRemovalProhibited('meal', passengerNum, flightNum)) {
+            backend.removeExtraService({
+                code: 'meal',
+                passenger_id: vm.orderInfo.passengers[passengerNum].id,
+                segment_id: vm.orderInfo.plainFlights[flightNum].id
+            });
+        }
+    }
+
+    function getSelectedPassengerFlightMeal(passengerNum, flightNum) {
+
+        var count = 0,
+            cost = 0,
+            currency;
+
+        if (
+            vm.orderInfo.groupedEditableExtraServices &&
+            vm.orderInfo.groupedEditableExtraServices.meal &&
+            vm.orderInfo.groupedEditableExtraServices.meal[passengerNum] &&
+            vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum] &&
+            vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].length
+        ) {
+            vm.orderInfo.groupedEditableExtraServices.meal[passengerNum][flightNum].forEach(function (item) {
+                if (item.amount) {
+                    count += item.amount;
+                }
+                if (item.totalPrice) {
+                    cost = Big(cost).plus(item.totalPrice).toFixed(2);
+                    currency = item.currency;
+                }
+            });
+        }
+
+        if (count) {
+            return {
+                count: count,
+                cost: cost,
+                currency: currency
+            };
+        } else {
+            return false;
+        }
+
+    }
+
+    function scrollToStart() {
+        passengersTableContainer.scrollTo(0);
+    }
+
+    function scrollToEnd() {
+        passengersTableContainer.scrollTo(passengersTableContainer[0].scrollWidth);
+    }
+
+    function mobileTableScrollHandler() {
+        var scrollLeft = passengersTableContainer[0].scrollLeft,
+            scrollWidth = passengersTableContainer[0].scrollWidth,
+            clientWidth = passengersTableContainer[0].clientWidth,
+            scrollRight = scrollWidth - clientWidth - scrollLeft;
+        vm.canScrollRight = (scrollRight !== 0);
+        vm.canScrollLeft = (scrollLeft !== 0);
+        $scope.$apply();
+    }
+
+    function getFirstAvailableFlightNum() {
+        var i;
+        for (i = 0; i < vm.orderInfo.plainFlights.length; i++) {
+            if (vm.service.availableBySegments[i]) {
+                return i;
+            }
+        }
+        return -1;
+    }
+
+    function getFirstAvailablePassengerNum(flightNum) {
+        var i;
+        if (vm.service.availableByPassengerSegments) {
+            for (i = 0; i < vm.orderInfo.passengers.length; i++) {
+                if (vm.service.availableByPassengerSegments[i][flightNum]) {
+                    return i;
+                }
+            }
+        }
+        return -1;
+    }
+
+}
diff --git a/src/css/_mixins.sass b/src/css/_mixins.sass
index e69de29..0a3885f 100644
--- a/src/css/_mixins.sass
+++ b/src/css/_mixins.sass
@@ -0,0 +1,68 @@
+/// Remove the unit of a length
+/// @param {Number} $number - Number to remove unit from
+/// @return {Number} - Unitless number
+@function strip-unit($number)
+  @if type-of($number) == 'number' and not unitless($number)
+    @return $number / ($number * 0 + 1)
+  @return $number
+
+
+@function em($wanted, $base: 16)
+  @return (strip-unit($wanted) / strip-unit($base)) * 1em
+
+@function rem($wanted, $base: 16)
+  @return (strip-unit($wanted) / strip-unit($base)) * 1rem
+
+@function percent($wanted, $context)
+  @return (strip-unit($wanted) / strip-unit($context) * 100) * 1%
+
+=fastTransition($props, $duration: .15s, $timing: ease-in-out)
+  transition-property: join((), $props, comma)
+  transition-duration: $duration
+  transition-timing-function: $timing
+
+=clearfix()
+  &:after
+    content: ""
+    display: table
+    clear: both
+
+=placeholder
+  &::-webkit-input-placeholder
+    @content
+  &:-moz-placeholder
+    @content
+  &::-moz-placeholder
+    @content
+  &:-ms-input-placeholder
+    @content
+
+
+=adaptivity($media)
+  $screen-size-laptop-large: 1440px
+  $screen-size-laptop: 1100px
+  $screen-size-tablet: 768px
+  $screen-size-phone: 515px
+  @if $media == desktop
+    @media only screen and (min-width: $screen-size-laptop-large)
+      @content
+
+  @if $media == laptop-large
+    @media only screen and (max-width: $screen-size-laptop-large)
+      @content
+
+  @else if $media == laptop
+    @media only screen and (max-width: $screen-size-laptop)
+      @content
+
+  @else if $media == only-laptop
+    @media only screen and (min-width: $screen-size-tablet) and (max-width: $screen-size-laptop)
+      @content
+
+  @else if $media == tablet
+    @media only screen and (max-width: $screen-size-tablet)
+      @content
+
+  @else if $media == phone
+    @media only screen and (max-width: $screen-size-phone)
+      @content
\ No newline at end of file
diff --git a/src/css/_variables.sass b/src/css/_variables.sass
index e69de29..5916c21 100644
--- a/src/css/_variables.sass
+++ b/src/css/_variables.sass
@@ -0,0 +1,19 @@
+// ============== colors =============
+
+$purpleBrandColor: #8a1776
+$lightenPurpleBrandColor: rgba($purpleBrandColor, .3)
+
+
+$white: #ffffff
+$black: #000000
+
+// ============== END colors =========
+
+
+
+// ============== images =============
+
+$mealIconPurple: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAABmJLR0QAigAXAHaiGnKwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4ggRCDErK3/EWAAAAgRJREFUSMe91j9oE2EcxvHv771QmsGkg2iaQiZXEZRSBOmmKBikWxARK4WAioMmTalDwUGTpnQQ/1AQKWZoKQ6CLlIci0iHDh2E6hQ0dwappVToyeV+DlXQqPljej7j+3LPB+69931PaJJiLPdEVb+Ofpw8O7l/dAIYCofDR1zXTfq+f8+yrIHrldvvG3UYmscCUtN943ERUeCQ67rHVdUH4rVa7VyzglaQOUA8z0uKyByAqp6JRCIvgM/AUMdId3f3UxG5aYx5mbHzb4GrwHx67YYrIiMicqdZh9BGpnrHYkAcqGTsvNPqcy0h033jcc/zZoDTPw0/D4VC6WsfblU6RqZ6x3p8318GDvxh+p0xpj9j5zfaQoqx3ABwCdgHvFLVOJBu0DEjIhXgKFAF7medwuu/IsVY7ryqzra7VnVREbmQdQqPf0Pm+++GyuXyQ6CHzrORSCRGUstXPP5XpBjLDQKHAzRWQqpaAhIBImUDRAN+W1EDrAeMrBtgNWBk1QCLASOLRkQWgO2AgG0RWTBZp1AFSgEhpaxTqBoAY8wEsLnLwOb33p1LK2PnbREZ3tVdLjKcsfP2j/t7Z3W2lt6c2HOsCpzq8ID0ReRy1imUGh31SVV9BOz9B+CTiFzMOoVn9X8iv35vW0trJ6ODs6raBRwEuloo/wI8sCwrlbHzK/WT3wC6qKgGaFt2YgAAAABJRU5ErkJggg==')
+$userIcon: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAABuAK6KZNO6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4ggRCzc08mvQcgAAAOpJREFUOMulkj1qAzEQRt9Mt40r3yKNweDCqZwLBHSEkFpNCp8hRTCo9hkEbl1kK7sIBLbJLdJvEdhxoyIrtOu/D9Tom3kzmpFQkPo46+AdWKWrWmHdBdfksTKQfASqzGoVljlEc0CqXBUaq5LHKOBf2yWt5j7KICA3L1EP8B2cAfVIfJ1ihp+gsAbaQnKbvPEZdME1CktgD/ylsy9t4KzmPsotc7lKPbr4uACegUeDB2CarF+BH+AA7Cy4rx5AfHwy+ABmFxZuBN4suE8RH18MtqVvfUYm8KoGmxuSAcRgo8DkjhlO9N4tnABGS0G3sfN0WQAAAABJRU5ErkJggg==')
+
+// ============== END images =========
\ No newline at end of file
diff --git a/src/css/index.sass b/src/css/index.sass
index e69de29..d3b1fe8 100644
--- a/src/css/index.sass
+++ b/src/css/index.sass
@@ -0,0 +1,65 @@
+@import 'variables'
+@import 'mixins'
+
+/* ==== redefine nordwind styles ==== */
+
+.passengersBlock_row-control-droporder-passenger-outer.active
+  background-color: $lightenPurpleBrandColor
+
+.passengersBlock_row-control-droporder-passenger-outer.active:after
+  border-left-color: $lightenPurpleBrandColor
+
+.passengersBlock_row-menu .list__i.isotopeGrid wrap
+  display: flex
+  flex-flow: wrap row
+
+.passengersBlock_row-menu
+    .item
+      flex: 50%
+
+.passengersBlock_row-menu-foodSorting ul li.active a:before
+  background-image: $mealIconPurple
+
+.passengersBlock_row-menu .item.active .food_info:after
+  display: none
+
+.route geo-marker .geo-marker__es-seat, .geo-marker__es-meal
+  display: flex
+
+.passengersBlock_row-control-droporder-passenger-outer.active .passengersBlock_row-control-droporder-passenger-icon
+  background: $userIcon
+
+.passengersBlock_row-control-passengers.active .passengersBlock_row-control-passengers-racenumber
+  @extend %text--highlight
+
+/* ==== END redefine nordwind styles ==== */
+
+
+/* ==== blocks ==== */
+
+%button
+  padding: 10px 15px
+  background: $purpleBrandColor
+  outline: none
+  border: none
+  color: $white
+  font-weight: 700
+
+%text
+  &--highlight
+    color: $purpleBrandColor
+
+
+/* ==== END blocks ==== */
+
+.item
+  &__btn
+    @extend %button
+
+
+.dep__point
+  &_city
+    margin-right: 10px
+
+geo-marker .arr__point_city
+  margin-right: 10px
diff --git a/src/index.js b/src/index.js
index e69de29..5f636b0 100644
--- a/src/index.js
+++ b/src/index.js
@@ -0,0 +1 @@
+// require('./components/es-meal/es-meal');
\ No newline at end of file
